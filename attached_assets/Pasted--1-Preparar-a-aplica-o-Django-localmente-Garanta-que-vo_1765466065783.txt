ğŸŸ¦ 1. Preparar a aplicaÃ§Ã£o Django localmente
Garanta que vocÃª tem:

Python instalado

Django instalado

Um projeto funcionando com manage.py

Banco usando SQLite normalmente

ğŸŸ¦ 2. Criar um arquivo requirements.txt

No terminal:

pip freeze > requirements.txt

ğŸŸ¦ 3. Criar um Dockerfile para Django

Crie um arquivo chamado Dockerfile na raiz do projeto:

FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .

RUN pip install --no-cache-dir -r requirements.txt

COPY . .

RUN python manage.py collectstatic --noinput

EXPOSE 8000

CMD ["gunicorn", "--bind", "0.0.0.0:8000", "SEU_PROJETO.wsgi:application"]


â¡ï¸ IMPORTANTE:
Substitua SEU_PROJETO pelo nome da pasta onde fica settings.py, urls.py, etc.
Exemplo: core, mysite, backend, etc.

ğŸŸ¦ 4. Criar o arquivo fly.toml

Execute:

fly launch


âš ï¸ IMPORTANTE:

Escolha "no" quando perguntar sobre criar PostgreSQL

Escolha regiÃ£o gru (Brasil) para mais velocidade

Escolha â€œnoâ€ para deploy automÃ¡tico (vamos ajustar primeiro)

Isso criarÃ¡ automaticamente o arquivo fly.toml.

ğŸŸ¦ 5. Criar volume para persistir o SQLite

No Fly.io, o banco deve ficar dentro de um volume, senÃ£o vocÃª perde dados quando o container reinicia.

Crie o volume:

fly volumes create data --size 1 --region gru

ğŸŸ¦ 6. Ajustar o settings.py para usar o volume

No arquivo onde fica as configs (ex: core/settings.py):

Substitua o caminho atual do SQLite por:

import os
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': '/data/db.sqlite3',  # Local do volume persistente
    }
}


Assim o banco fica guardado no volume /data, protegido contra reinÃ­cios.

ğŸŸ¦ 7. Atualizar o Dockerfile para permitir o volume

No fim do Dockerfile adicione:

VOLUME ["/data"]


Isso garante que o volume serÃ¡ montado no container.

ğŸŸ¦ 8. Atualizar o fly.toml para usar o volume

Abra fly.toml e adicione embaixo de [mounts]:

[mounts]
  source="data"
  destination="/data"


Isso conecta o volume ao container.

ğŸŸ¦ 9. Definir a porta correta no Fly.io

No fly.toml, o internal_port deve ser 8000:

[http_service]
  internal_port = 8000

ğŸŸ¦ 10. Fazer o deploy

Agora sim:

fly deploy

ğŸŸ¦ 11. Entrar no container e rodar migraÃ§Ãµes
fly ssh console


Dentro do container:

python manage.py migrate
python manage.py createsuperuser


Depois:

exit

ğŸŸ¦ 12. Testar

Acesse:

https://SEU-APP.fly.dev

ğŸ‰ PRONTO!

VocÃª agora tem um portfÃ³lio Django com SQLite rodando de forma:

rÃ¡pida

confiÃ¡vel

SEM hibernaÃ§Ã£o

com banco salvo em volume persistente

deploy simples com docker

domÃ­nio https grÃ¡tis